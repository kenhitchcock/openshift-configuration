---

- name: "Cloud based deployment."
  block:
    - name: "Create infranodes."
      import_tasks: cloud.yml
  when: cloud == "Azure" or cloud == "AWS"

- name: "VMWare based deployment"
  block:
    - name: "Create infranodes on vmware."
      import_tasks: vmware.yml
  when: platform == "VMWare"

- name: "Move resources to new infra nodes."
  import_tasks: moveresources.yml

- name: "Set healthchecks in place."
  import_tasks: healthchecks.yml

- name: "Cleanup any files created."
  import_tasks: cleanup.yml
